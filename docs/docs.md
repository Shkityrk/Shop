# Архитектура системы
Клиентская часть представлена одностраничным приложением на библиотеке React с использованием TypeScript.
Логика маршрутизации позволяет переходить между страницами без перезагрузки, а менеджмент состояния обеспечивает реактивное обновление интерфейса при изменении корзины или авторизации пользователя.
## Взаимодействие с бэкендом  
Для всех HTTP-запросов используется единый экземпляр axios, где в качестве базового адреса берётся переменная окружения. Это обеспечивает безопасность и правильную работоспособность кода.
Настроены заголовки по умолчанию и перехватчики, которые автоматически добавляют в каждый запрос JWT-токен из куки `access_token`, который при необходимости передается с бэкенда.
Методы работы с корзиной и авторизацией вызывают REST-эндпоинты бэкенда

- GET /products – получение списка товаров;
- POST /auth/register и POST /auth/login – регистрация и вход;
- GET/POST/DELETE /cart – управление элементами корзины.

## Сборка и развёртывание в контейнере Docker  
Процесс сборки и запуска приложения автоматизирован с помощью Docker. В корне клиентской части расположен файл Dockerfile. Он отвечает за сборку контейнера. А соответствующий сервис в docker-compose.yml - за запуск контейнера. 

Сборка образа базируется на node, который устанавливает зависимости, описанные в файлах package.json и package-lock.json. После этого копируется остальной код и сборка образа завершается.
Система находится в монорепозитории, контейнер с фронтендом запускается в последнюю очередь, после проверки работоспособности контейнером бэкенда. При старте контейнера по умолчанию выполняется команда npm run build, которая формирует оптимизированную продукцию в папке dist/. Теперь достаточно перенаправлять через Nginx клиентов, которые ожидают информацию с 80 порта (http) на содержимое папки dist. 

# Общая структура проекта  
Проект организован по принципам модульности и разделения ответственности. В корне клиентской части находятся конфигурационные файлы Vite, ESLint и Tailwind CSS, а также папка src, внутри которой сосредоточен весь код приложения.
Папка src содержит следующие основные директории:
1)	api - Здесь расположен единый экземпляр клиента axios с настройками baseURL, перехватчиками запросов и обработки ошибок. Такое решение позволяет централизованно контролировать взаимодействие с сервером и легко добавлять авторизацию по JWT.
2)	components - Переиспользуемые части интерфейса: заголовок, навигация, карточка товара, кнопки, модальные окна. Каждый компонент предназначен для одной чёткой задачи и не содержит бизнес-логики.
3)	pages - Страницы-оболочки, соответствующие маршрутам. Каждая страница собирает из компонентов законченный вид: главная, каталог, карточка товара, авторизация, корзина, профиль.
4)	store - Реализация состояния приложения через Zustand. Отдельные стора для авторизации (useAuthStore), корзины (useCartStore) и списка товаров (useProductsStore). Такое решение упрощает тестирование и позволяет компонентам подписываться только на нужные части состояния.
5)	types - Общие интерфейсы и типы TypeScript: товар, пользователь, ответ сервера. Централизованное хранение типов обеспечивает единообразие и безопасность данных.
6)	utils - Вспомогательные функции: форматирование цен, работа с датами, обработка ошибок HTTP.
 

Точка входа приложения — файл main.tsx, в котором происходит обёртка App в провайдер Zustand и BrowserRouter.
### Структура главной страницы  
Главная страница (src/pages/HomePage.tsx) состоит из следующих блоков:
1)	Header - фиксированная шапка с логотипом и ссылками на основные разделы. Реализована как компонент Header, получает через props информацию о количестве товаров в корзине и статусе авторизации.
2)	Hero-блок – большой баннер с промо-изображением и кнопкой перехода в каталог. Оформлен стилями CSS и адаптивными утилитами. Используется lazy-loading для фонового изображения.
3)	Блок популярных товаров. При монтировании страницы via useEffect выполняется запрос на сервер о популярных товарах и результат попадает в useProductsStore. Карточки товаров рендерятся через компонент ProductCard, каждый из которых получает данные товара через props.
 

Такая организация главное страницы позволяет с одной стороны разделить страницу на презентационные и контейнерные компоненты, что позволяет использовать эти же элементы на других страницвах, а с другой оптимизировать и ускорить визуально загрузку страницы, даже если сервер перегружен или не отвечает.
### Структура страницы авторизации  
Страница авторизации объединяет две формы: вход и регистрация. 

Переключатель между формой входа и регистрации реализован через локальный стейт. Компонент AuthForm принимает props: список полей, функцию submit и title. Поля описаны через массив объектов. Это позволяет легко добавлять новые поля без дублирования кода. При отправке формы вызывается метод из useAuthStore: login или register. В случае успеха JWT-токен сохраняется в куки и сторе, происходит редирект на главную страницу. В случае ошибки отображается уведомление через компонент Toast.

После авторизации открывается доступ к личному кабинету пользователя, в котором располагается основная информация и команды для просмотра или изменения пользовательских данных и просмотра истории заказов.

При выполненном входе в систему обеспечивается подсчет количества товаров, которые выбрал пользователь в корзину.
 
В результате этого локальный стейт позволяет пользователю без перезагрузки менять вид формы, а хранение токена в сторе и куки гарантирует, что вся цепочка запросов будет автоматически авторизована и безопасна.

### Структура страницы корзины  
Список товаров в корзине также реализован через отдельный стор. Он хранит массив {productId, quantity}. При рендере страницы в useEffect данные корзины подтягиваются с сервера и сохраняются в стор. Для каждого элемента создаётся компонент CartItem, в котором отображается изображение, название, цена и контролы для изменения количества. Реализована возможность изменения количества и удаление товара из корзины, а сам стор автоматически обновляется.

Подсчёт итоговой суммы производится селектором в useCartStore: сумма = Σ(price × quantity). Отображается в отдельном блоке вместе с кнопкой «Оформить заказ».

Также есть кнопка для оформления заказа, которая возвращает Toast об успешном заказе, однако это можно изменить и добавить систему оплаты.

Использование такой структуры имеет свои плюсы. Так, использование CartItem как отдельного компонента упрощает управление состоянием конкретной позиции, HTTP-запросы делегированы api-модулю, что позволяет централизованно обрабатывать ошибки и токены, а селектор для расчёта суммы не требует дополнительных обходов массива в компонентах, что повышает производительность.

### Структура страницы товара
На главной странице каждый товар представляет собой отдельную карточку с уже заготовленным шаблоном под данные с бэкенда.

Страница товара также представляет собой отдельную страницу.

При монтировании компонента передаётся идентификатор товара из параметров маршрута. Внутри вызывается функция, которая делает GET-запрос и возвращает полные данные товара (название, описание, цену, список изображений, характеристики, отзывы). Пока данные загружаются, отображается индикатор загрузки.

Фотография открывается из Интернета, путем загрузки изображения по переданному URL, для оптимизации используется lazy-loading и предзагрузка следующего изображения.

При клике на Кнопку «Добавить в корзину» вызывается метод, которому передаются id товара и количество, и стор обновляет своё состояние и делает запрос на сервер. После успешного добавления показывается уведомление.
 
Такая структура позволяет минимизировать дублирование HTTP-запросов для облегчения нагрузки на сервер и ускоряет навигацию. Разбиение на мелкие презентационные компоненты облегчает поддержку, тестирование и переиспользование, а также позволяет делать отложенная загрузку элементов изображений и компонентов, либо визуально показывать, что страница не "зависла".
